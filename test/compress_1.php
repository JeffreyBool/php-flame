<?php
flame\init("compress_1");

flame\go(function() {
    $x = flame\compress\snappy_compress(json_encode(["a"=>1234567890123,"b"=>1234567890123,"x"=>"中文","y"=>"中文"], JSON_UNESCAPED_UNICODE));
    echo "(", strlen($x), ") ", bin2hex($x), "\n";
    $y = flame\compress\snappy_uncompress($x);
    echo "(", strlen($y), ") ", print_r(json_decode($y,true)), "\n";

    $x = "3f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d842256000000000000000000000400000000000000003f507b2261223a313233343536373839303132332c22624212006078223a22e4b8ade69687222c2279223a22e4b8ade69687227d22560000b0a0af832256000090a1af832256000010a0af8322560000e0239d84225600000000000000000000040000000000000000";
    $y = flame\compress\snappy_compress($x);
    echo strlen($x), " < ", strlen($y), "\n";
});

flame\run();
